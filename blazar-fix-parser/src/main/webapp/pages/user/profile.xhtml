<ui:composition template="/template/layoutTemplate.xhtml"
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                xmlns:f="http://xmlns.jcp.org/jsf/core">

    <ui:define name="content">
        <div class="ui-grid-row">
            <div class="content">
                <h:form enctype="multipart/form-data">
                    <p:messages id="messages" showDetail="true" closable="true"/>

                    <h2>#{msg['com.blazarquant.bfp.pages.user.profile.addDictionary']}</h2>

                    <h:form enctype="multipart/form-data">
                        <p:panelGrid columns="2" cellpadding="20">
                            <h:outputText value="Name: "/>
                            <p:inputText id="dictionaryName"
                                         value="#{profileBean.providerName}"
                                         style="width:250px"/>

                            <h:outputText value="Loader: "/>
                            <p:selectOneMenu id="dictionaryFormat"
                                             value="#{profileBean.providerLoader}"
                                             converter="xmlLoaderTypeConverter"
                                             style="width:250px; padding-right: 0px;">
                                <p:ajax/>
                                <f:selectItems value="#{profileBean.loaderTypes}"
                                               var="loader"
                                               itemLabel="#{loader}"
                                               itemValue="#{loader}"/>
                            </p:selectOneMenu>

                            <h:outputText value="File: "/>
                            <p:fileUpload value="#{profileBean.uploadedFile}"
                                          mode="simple"
                                          skinSimple="true"/>

                            <p:commandButton value="#{msg['com.blazarquant.bfp.pages.user.profile.add']}"
                                             icon="ui-icon-check"
                                             ajax="false"
                                             actionListener="#{profileBean.handleFileUpload}"
                                             update="dictionariesTable"
                                             styleClass="btn-blazar btn-blazar-blue btn-blazar-blue-hover"/>
                        </p:panelGrid>
                    </h:form>

                    <h2>#{msg['com.blazarquant.bfp.pages.user.profile.myDictionaries']}</h2>

                    <h:form id="dictionariesForm">
                        <p:dataTable id="dictionariesTable"
                                     var="provider"
                                     value="#{profileBean.providerDescriptors}"
                                     resizableColumns="true"
                                     emptyMessage="#{msg['com.blazarquant.bfp.pages.user.profile.emptyDictionaries']}"
                                     tableStyle="width:100%"
                                     selection="#{profileBean.defaultProvider}"
                                     rowKey="#{provider.hashCode()}"
                                     rowIndexVar="rowIndex">
                            <p:ajax event="rowSelectRadio"/>
                            <p:column headerText="#{msg['com.blazarquant.bfp.pages.user.profile.default']}"
                                      selectionMode="single"
                                      style="width:100px;text-align:center"/>

                            <p:column headerText="#{msg['com.blazarquant.bfp.pages.user.profile.dictionaryName']}">
                                <h:outputText value="#{provider.providerName}" style="font-size: 12px;"/>
                            </p:column>

                            <p:column headerText="#{msg['com.blazarquant.bfp.pages.user.profile.dictionaryFormat']}">
                                <h:outputText value="#{provider.loaderType}" style="font-size: 12px;"/>
                            </p:column>

                            <p:column>
                                <p:commandButton icon="ui-icon-trash"
                                                 value="#{msg['com.blazarquant.bfp.pages.user.profile.delete']}"
                                                 action="#{profileBean.doRemoveProvider(provider)}"
                                                 update="@form" process="@this"
                                                 rendered="#{profileBean.isDefaultProvider(provider)}"
                                                 />
                            </p:column>
                        </p:dataTable>
                    </h:form>
                </h:form>
            </div>
        </div>
    </ui:define>
</ui:composition>