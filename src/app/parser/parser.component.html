<div fxLayout="column">
  <textarea matInput class="width-min-full width-max-full parser-input"
            placeholder="{{ 'PARSER.PLACEHOLDER' | translate }}"
            [formControl]="messagesFormControl"></textarea>
  <div fxLayout="row" fxLayoutAlign="space-between" class="top-padded">
    <div fxLayout="row">
      <button mat-stroked-button color="primary"
              (click)="onSampleButtonClick()">{{ 'PARSER.SAMPLE' | translate }}</button>
    </div>
    <div fxLayout="row">
      <mat-select #fontSize value="16px">
        <mat-option value="10px">10px</mat-option>
        <mat-option value="12px">12px</mat-option>
        <mat-option value="14px">14px</mat-option>
        <mat-option value="16px">16px</mat-option>
        <mat-option value="18px">18px</mat-option>
        <mat-option value="20px">20px</mat-option>
      </mat-select>
      <button mat-stroked-button color="primary" (click)="onParseButtonClick()"
              fxFlexAlign="end">{{ 'PARSER.PARSE' | translate }}</button>
    </div>
  </div>

  <div fxLayout="row">
    <div fxFlex="60">
      <table mat-table [dataSource]="messages">
        <ng-container matColumnDef="id">
          <th mat-header-cell *matHeaderCellDef>{{ 'PARSER.MESSAGES.NUMBER' | translate }}</th>
          <td mat-cell *matCellDef="let message"> {{message.messageId}} </td>
        </ng-container>

        <ng-container matColumnDef="sender">
          <th mat-header-cell *matHeaderCellDef>{{ 'PARSER.MESSAGES.SENDER' | translate }}</th>
          <td mat-cell *matCellDef="let message"> {{ getSender(message) }} </td>
        </ng-container>

        <ng-container matColumnDef="receiver">
          <th mat-header-cell *matHeaderCellDef>{{ 'PARSER.MESSAGES.RECEIVER' | translate }}</th>
          <td mat-cell *matCellDef="let message"> {{ getReceiver(message) }} </td>
        </ng-container>

        <ng-container matColumnDef="sendingTime">
          <th mat-header-cell *matHeaderCellDef>{{ 'PARSER.MESSAGES.SENDING_TIME' | translate }}</th>
          <td mat-cell *matCellDef="let message"> {{ getSendingTime(message) }} </td>
        </ng-container>

        <ng-container matColumnDef="msgType">
          <th mat-header-cell *matHeaderCellDef>{{ 'PARSER.MESSAGES.MSG_TYPE' | translate }}</th>
          <td mat-cell *matCellDef="let message"> {{ getMsgType(message) }} </td>
        </ng-container>

        <ng-container matColumnDef="summary">
          <th mat-header-cell *matHeaderCellDef>{{ 'PARSER.MESSAGES.SUMMARY' | translate }}</th>
          <td mat-cell *matCellDef="let message"> {{ getSummary(message) }} </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="messagesColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: messagesColumns;" (click)="getMessage(row)"></tr>
      </table>
      <mat-paginator [pageSizeOptions]="[25, 50]" showFirstLastButtons></mat-paginator>
    </div>
    <div fxFlex="40" fxLayoutAlign="flex-end">
      <table mat-table [dataSource]="(selectedMessage?.messageFields || [])">
        <ng-container matColumnDef="tag">
          <th mat-header-cell *matHeaderCellDef>{{ 'PARSER.MESSAGE.TAG' | translate }}</th>
          <td mat-cell *matCellDef="let messageField"> {{messageField?.fixField?.tag}} </td>
        </ng-container>

        <ng-container matColumnDef="name">
          <th mat-header-cell *matHeaderCellDef>{{ 'PARSER.MESSAGE.NAME' | translate }}</th>
          <td mat-cell *matCellDef="let messageField" class="field-column"
              [ngClass]="getTagStyle(messageField?.fixField?.tag) ? 'field-column-dict' : 'field-column-grey'">
            {{ messageField?.fixField?.name }}
          </td>
        </ng-container>

        <ng-container matColumnDef="value">
          <th mat-header-cell *matHeaderCellDef>{{ 'PARSER.MESSAGE.VALUE' | translate }}</th>
          <td mat-cell *matCellDef="let messageField">{{ messageField?.fixValue?.value }}</td>
        </ng-container>

        <ng-container matColumnDef="description">
          <th mat-header-cell *matHeaderCellDef>{{ 'PARSER.MESSAGE.DESCRIPTION' | translate }}</th>
          <td mat-cell *matCellDef="let messageField"> {{ messageField?.fixValue?.description }} </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="messageColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: messageColumns;"></tr>
      </table>
    </div>
  </div>
</div>
